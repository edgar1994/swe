<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
>
<f:view locale="#{languageHandler.language}"/>
<h:head>
    <title><ui:insert name="title">#{msg['LOGIN.TITEL']}</ui:insert></title>
    <link rel="stylesheet" href="resources/index.css" type="text/css"/>
</h:head>
<body>
<p:growl id="growl" showDetail="true" sticky="true"/>
<h:form>
    <div id="contentheader">
        <p:commandButton value="Mainpage" id="mainpage" action="${indexController.switchToIndex}"
                         immediate="true"/>
        <p:commandButton value="#{msg['USER.BEZEICHNUNG']}" id="mitarbeiter"
                         action="${userController.switchToUser()}"
                         immediate="true"/>
        <p:commandButton value="#{msg['GRUPPENTABELLE.TITEL']}" id="Gruppe"
                         action="${gruppeController.switchToGruppe()}"
                         immediate="true"/>
        <p:commandButton value="#{msg['PROJEKTTABELLE.TITEL']}" id="Projekt"
                         action="${projektController.switchToProjekt()}"
                         immediate="true"/>

        <div id="spracheLogout">
            <p:commandButton value="#{msg['SPRACHE.DEUTSCH']}"
                             action='#{languageHandler.actionLanguage("de")}'/>
            <p:commandButton value="#{msg['SPRACHE.ENGLISCH']}"
                             action='#{languageHandler.actionLanguage("en")}'>
                <p:ajax event="click"/>
            </p:commandButton>
            <p:commandButton value="#{msg['LOGIN.AUSLOGGEN']}" action='${loginController.logout}'
                             immediate="true"/>
        </div>
    </div>

    <p:panelGrid id="grid" columns="2">
        <f:facet name="header">#{msg['CHANGEPASSWORT.HEADER']}</f:facet>
        <p:outputLabel value="#{msg['CHANGEPASSWORT.PASSWORT']}" for="password"/>
        <h:panelGroup>
            <p:password id="password" required="true"
                        value="#{loginController.changeFirstPassword}"/>
            <p:message for="password" styleClass="message"/>
        </h:panelGroup>

        <p:outputLabel value="#{msg['CHANGEPASSWORT.REPASSWORT']}" for="repassword"/>
        <h:panelGroup>
            <p:password id="repassword" required="true"
                        value="#{loginController.changeSecPassword}"/>
            <p:message for="repassword" styleClass="message"/>
        </h:panelGroup>
        <h:panelGroup/>
        <p:commandButton action="${loginController.changePassword()}" value="#{msg['CHANGEPASSWORT.SAVE']}"/>
    </p:panelGrid>
</h:form>
</body>
<f:event listener="#{loginController.checkLoggedIn}" type="preRenderComponent"/>
</html>
