<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">
<f:view locale="#{languageHandler.language}"/>
<h:head>
    <title><ui:insert name="title">#{msg['USER.TITEL']}</ui:insert></title>
    <link rel="stylesheet" href="resources/index.css" type="text/css"/>
</h:head>
<h:body>
    <h:form>
        <div align="right">
            <h:commandButton value="#{msg['SPRACHE.DEUTSCH']}" action='#{languageHandler.actionLanguage("de")}'/>
            <h:commandButton value="#{msg['SPRACHE.ENGLISCH']}" action='#{languageHandler.actionLanguage("en")}'/>
            <h:commandButton value="#{msg['LOGIN.AUSLOGGEN']}" action='${loginController.logout}' immediate="true"/>
        </div>
    </h:form>
    <div>
        <a href="index.xhtml">Mainpage</a>
        <a href="userTabelle.xhtml">#{msg['USER.BEZEICHNUNG']}</a>
        <a href="gruppeTabelle.xhtml">#{msg['GRUPPENTABELLE.TITEL']}</a>
    </div>
    <div id="content">
        <p:growl id="growl" showDetail="true" sticky="true"/>
        <ui:insert name="content">
            <h:dataTable id="userTabelle" var="user" value="#{userController.entityList}"
                         rowClasses="odd,even" headerClass="header">
                <h:column>
                    <f:facet name="header">#{msg['USER.NACHNAME']}</f:facet>
                    <h:outputText value="#{user.nachname}"/>
                </h:column>
                <h:column>
                    <f:facet name="header">#{msg['USER.VORNAME']}</f:facet>
                    <h:outputText value="#{user.vorname}"/>
                </h:column>
                <h:column>
                    <f:facet name="header">#{msg['USER.ADRESSE']}</f:facet>
                    <h:outputText value="#{userController.formatedAdresse(user)}"/>
                </h:column>
                <h:column rendered="#{loginController.adminRole()}">
                    <div align="center">
                        <f:facet name="header">#{msg['USER.LOESCHEN']}</f:facet>
                        <h:form>
                            <h:commandButton class="customerButton" action="#{userController.deleteRow}"
                                             value="#{msg['USER.LOESCHEN']}"/>
                        </h:form>
                    </div>
                </h:column>
                <h:column rendered="#{loginController.adminRole()}">
                    <div align="center">
                        <f:facet name="header">#{msg['USER.BEARBEITEN']}</f:facet>
                        <h:form>
                            <h:commandButton class="customerButton" action="#{userController.edit}"
                                             value="#{msg['USER.BEARBEITEN']}"/>
                        </h:form>
                    </div>
                </h:column>
            </h:dataTable>
            <h:form rendered="#{loginController.adminRole()}">
                <h:commandButton rendered="#{loginController.adminRole()}"
                                 action="#{userController.newUser}"
                                 value="#{msg['USER.NEU']}"/>
            </h:form>
        </ui:insert>
    </div>
</h:body>
<f:event listener="#{loginController.checkLoggedIn}" type="preRenderView"/>
<f:event type="preRenderView" listener="#{loginController.updateCurrentUser}"/>
</html>
